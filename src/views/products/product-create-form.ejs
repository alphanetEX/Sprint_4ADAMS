<!DOCTYPE html>
<html lang="es">
<!-- Include Head -->
<%- include('../partials/head.ejs', { title: 'Formulario de creación' }) %>
<body>
	<!-- Header -->
	<%- include('../partials/header.ejs') %> 
	<!-- /Header -->

	<div class="creacion-producto">
		<div class="titulo">
			<div class="col-12">
				<h2 class="products-title">Formulario de creación de productos</h2>
			</div>
		</div>
		<div class="col-12">
		<div class="form-creacion">
			<form action="/products" method="POST" enctype="multipart/form-data">

				<div class="formdecreacion">

					<div class="nombre">
						<label for="name" class="form-label">Nombre del producto:</label>

						<% console.log("locals") %> 
						<% console.log(locals) %> 

						<input 
							type="text" id="name" name="name" class="form-input"
							placeholder="Ej: Zapatillas Reebok"
						 	value= "<%= locals.oldData ? oldData.name: null %>"
						>
						
						<% if (locals.errors && errors.name) { %>
							<div class="errorValidacion">
								<p><%= errors.name.msg %></p>
							</div> 
						<% } %>
					</div>					
				

				
					<div class="precio">
						<label for="price" class="form-label">Precio del producto:</label>

						<input 
							type="number" id="price" name="price" class="form-input"
							placeholder="Ej: 5678" 
							value= "<%= locals.oldData ? oldData.price : null %>" 
						>

						<% if (locals.errors && errors.price) { %>
							<div class="errorValidacion">
								<p><%= errors.price.msg %></p>
							</div> 
						<% } %>
					</div>

					<div class="descuento">
						<label for="discount" class="form-label">Descuento:</label>

						<input 
							type="number" id="discount" name="discount" 
							placeholder="Ej: 15" class="form-input"
							value="<%= locals.oldData ? oldData.discount : null  %>" 
						>

						<% if (locals.errors && errors.discount) { %>
							<div class="errorValidacion">
								<p><%= errors.discount.msg %></p>
							</div> 
						<% } %>
					</div>
					

					<div class="imagen">
						<label for="image" class="form-label">Foto:</label>
						
						<input type="file" id="image" name="image"
						 	accept=".png, .jpeg, .jpg" 
						  	placeholder="Ingrese una foto" 
						   	class="form-file-input"
						 	multiple 
						>	

						<% if (locals.errors && errors.image) { %>
							<div class="errorValidacion">
								<p><%= errors.image.msg %></p>
							</div> 
						<% } %>					
					</div>
					
					<div class="col-12 col-md-6">
						<label for="category" class="form-label">Categoría:</label>
						
						<select name="category" id="category" class="form-input">
							<option value="">Elegí</option>
							<!-- option in-sale -->
							<option 
								value="in-sale" 
								<%= locals.oldData && oldData.category == "in-sale" ? "selected" : null %>
							>
								En oferta
							</option>
							<!-- option visited -->
							<option 
								value="visited"	
								<%= locals.oldData && oldData.category == "visited" ? "selected" : null %>
							>
								Últimos visitados
							</option>
						</select>

						<% if (locals.errors && errors.category) { %>
							<div class="errorValidacion">
								<p><%= errors.category.msg %></p>
							</div> 
						<% } %>
					
					</div>					
				
					<div class="descripcion">
						<label for="description" class="form-label">Descripción:</label>
						<textarea name="description" id="description" class="form-input"><%= locals.oldData ? oldData.description : null %></textarea>
						<% if (locals.errors && errors.description) { %>
							<div class="errorValidacion">
								<p><%= errors.description.msg %></p>
							</div> 
						<% } %>
					</div>

					<div class="col-12">
						<button type="submit" class="guardar-button">Guardar producto</button>
					</div>
				</div>
			</form>
		</div>
		</div>

	</div>
	<!-- /todos los productos -->

	<!-- footer -->
	<%- include('../partials/footer.ejs') %>
	<!-- /footer -->
</body>	
</html>